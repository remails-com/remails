apiVersion: v1
kind: Service
metadata:
  name: mta
  labels:
    app: mta
  annotations:
    helm.sh/resource-policy: keep
    service.beta.kubernetes.io/upcloud-load-balancer-config: |
      {
        "plan": {{ .Values.smtp.load_balancer_plan | quote }},
        "frontends": [{
          "mode": "tcp"
        }]
      }
spec:
  ipFamilyPolicy: PreferDualStack
  selector:
    app: mta
  ports:
    - name: smtp
      protocol: TCP
      port: {{ .Values.smtp.port }}
      targetPort: smtp
  type: LoadBalancer
  